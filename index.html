<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MaiorMargem - Monitoramento de Preços</title>
<style>
  :root { color-scheme: dark; }
  body {
    margin: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #000 url('./Gemini_Generated_Image_ag5zswag5zswag5z.png') no-repeat center center fixed;
    background-size: cover;
    color: #fff;
  }
  a { color: #9cf; text-decoration: none; }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 30px;
    background: rgba(18, 18, 18, 0.85);
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 1px solid #2a2a2a;
  }
  header img { height: 45px; }
  .auth-chip {
    background: #0e4;
    color: #001;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 12px;
    margin-left: 12px;
    display: none;
  }
  .header-buttons button {
    background: #00b140;
    color: #fff;
    border: none;
    padding: 10px 20px;
    margin-left: 10px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 14px;
    transition: transform .2s, background .3s;
  }
  .header-buttons button:hover { background: #009b38; transform: scale(1.05); }

  .plans {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 80px 20px;
    gap: 20px;
    background: rgba(18,18,18,0.7);
    backdrop-filter: blur(4px);
  }
  .plan {
    border: 1px solid #2a2a2a;
    border-radius: 10px;
    padding: 25px;
    width: 260px;
    background: rgba(28, 28, 28, 0.9);
    box-shadow: 0 2px 12px rgba(0,0,0,.3);
    text-align: center;
    transition: transform .3s, border-color .3s;
  }
  .plan:hover { transform: translateY(-5px); border-color: #00b140; }
  .plan h2 { color: #00b140; font-size: 20px; margin: 0; }
  .plan ul { list-style: none; padding: 0; margin: 15px 0; text-align: left; }
  .plan ul li { margin-bottom: 8px; }
  .plan .price { font-size: 20px; color: #e63946; font-weight: bold; margin-top: 10px; }

  .overlay { display: none; position: fixed; z-index: 1500; inset: 0; background: rgba(0,0,0,.5); }
  .side-panel {
    position: fixed; top: 0; right: -400px; width: 350px; height: 100%;
    background: #1c1c1c; box-shadow: -4px 0 15px rgba(0,0,0,.5);
    z-index: 2000; padding: 20px; transition: right .4s ease; overflow-y: auto;
  }
  .side-panel.active { right: 0; }
  .side-panel h3 { color: #00b140; margin-top: 0; }
  .side-panel input { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #2a2a2a; border-radius: 4px; background: #121212; color: #fff; }
  .side-panel button { width: 100%; background: #00b140; color: #fff; padding: 10px; border: none; border-radius: 4px; cursor: pointer; }
  .side-panel button:hover { background: #009b38; }
</style>
</head>
<body>

<header>
  <img src="https://via.placeholder.com/180x45?text=MaiorMargem" alt="MaiorMargem">
  <div style="display:flex; align-items:center;">
    <span id="authChip" class="auth-chip"></span>
    <div id="headerBtns" class="header-buttons">
      <button onclick="openPanel('cadastro')">Cadastrar</button>
      <button onclick="openPanel('login')">Entrar</button>
    </div>
    <div id="goDashboard" class="header-buttons" style="display:none;">
      <button onclick="goDashboard()">Ir para o Dashboard</button>
    </div>
    <div id="logoutBox" class="header-buttons" style="display:none;">
      <button onclick="sair()">Sair</button>
    </div>
  </div>
</header>

<section class="plans">
  <div class="plan">
    <h2>Trial</h2>
    <ul><li>Monitorar 100 SKUs</li><li>Sites monitorados: 2</li><li>Análise mensal: 1 inclusa</li></ul>
    <div class="price">Gratuito</div>
  </div>
  <div class="plan">
    <h2>Básico</h2>
    <ul><li>Monitorar 1.000 SKUs</li><li>Sites monitorados: 5</li><li>Análise semanal: 4 inclusas</li></ul>
    <div class="price">R$ 129,90</div>
  </div>
  <div class="plan">
    <h2>Intermediário</h2>
    <ul><li>Monitorar 5.000 SKUs</li><li>Sites monitorados: 8</li><li>Análise semanal: 4 inclusas</li></ul>
    <div class="price">R$ 159,90</div>
  </div>
  <div class="plan">
    <h2>Prime</h2>
    <ul><li>Monitorar 20.000 SKUs</li><li>Sites monitorados: 12</li><li>Análise semanal: 4 inclusas</li></ul>
    <div class="price">R$ 249,90</div>
  </div>
</section>

<!-- Overlay -->
<div id="overlay" class="overlay" onclick="closePanel()"></div>

<!-- Painel Cadastro -->
<div id="panel-cadastro" class="side-panel" role="dialog" aria-labelledby="cadTitle" aria-modal="true">
  <h3 id="cadTitle">Cadastre-se</h3>
  <input id="nomeCadastro" type="text" placeholder="Nome (opcional)">
  <input id="emailCadastro" type="email" placeholder="Email">
  <input id="senhaCadastro" type="password" placeholder="Senha">
  <button id="btnCadastrar" onclick="registrarUsuario()">Cadastrar</button>
</div>

<!-- Painel Login -->
<div id="panel-login" class="side-panel" role="dialog" aria-labelledby="logTitle" aria-modal="true">
  <h3 id="logTitle">Entrar</h3>
  <input id="emailLogin" type="email" placeholder="Email">
  <input id="senhaLogin" type="password" placeholder="Senha">
  <button onclick="fazerLogin()">Login</button>
  <div style="margin-top:10px; text-align:center;">
    <a href="javascript:void(0)" onclick="openPanel('recuperar')" style="color:#9cf;">Esqueci minha senha</a>
  </div>
</div>

<!-- Painel Recuperar Senha -->
<div id="panel-recuperar" class="side-panel" role="dialog" aria-labelledby="recTitle" aria-modal="true">
  <h3 id="recTitle">Recuperar Senha</h3>
  <input id="emailRecuperar" type="email" placeholder="Digite seu email">
  <button onclick="recuperarSenha()">Enviar link</button>
</div>

<script src="config.js?v=11"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  function getBaseSite() {
    try { if (window.CONFIG?.SITE_URL) return window.CONFIG.SITE_URL.replace(/\/+$/,''); }
    catch(_) {}
    return window.location.origin;
  }
  const DASHBOARD_URL = getBaseSite() + '/dashboard.html';

  const { SUPABASE_URL, SUPABASE_ANON_KEY } = window.CONFIG || {};
  const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth: { persistSession: true, autoRefreshToken: true } });

  function openPanel(type){ document.getElementById('overlay').style.display='block'; document.getElementById('panel-'+type).classList.add('active'); }
  function closePanel(){ document.getElementById('overlay').style.display='none'; document.querySelectorAll('.side-panel').forEach(p=>p.classList.remove('active')); }
  async function registrarUsuario(){ const email=document.getElementById('emailCadastro').value.trim(); const senha=document.getElementById('senhaCadastro').value; const nome=document.getElementById('nomeCadastro').value.trim(); if(!email||!senha)return alert('Preencha email e senha.'); const {error}=await sb.auth.signUp({email,password:senha,options:{data:{nome},emailRedirectTo:getBaseSite()+'/reset.html'}}); if(error)alert('Erro: '+error.message); else alert('Verifique seu email.'); closePanel(); }
  async function fazerLogin(){ const email=document.getElementById('emailLogin').value.trim(); const senha=document.getElementById('senhaLogin').value; const {error}=await sb.auth.signInWithPassword({email,password:senha}); if(error)return alert('Erro: '+error.message); window.location.assign(DASHBOARD_URL); }
  async function sair(){ await sb.auth.signOut(); alert('Você saiu.'); }
  async function recuperarSenha(){ const email=document.getElementById('emailRecuperar').value.trim(); const {error}=await sb.auth.resetPasswordForEmail(email,{redirectTo:getBaseSite()+'/reset.html'}); if(error)alert('Erro: '+error.message); else alert('Link enviado.'); closePanel(); }
</script>
</body>
</html>
